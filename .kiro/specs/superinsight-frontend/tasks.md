# SuperInsight 企业级管理前端 - 实施任务计划

## 概述

基于 React 18 + Ant Design Pro 技术栈，构建专业、简洁、安全的企业级数据标注管理平台。采用分期实现策略，优先完成核心功能，逐步扩展高级特性。

## 技术栈

- **前端框架**: React 18 + Vite + TypeScript
- **UI 组件库**: Ant Design Pro + Pro Components
- **状态管理**: Zustand + TanStack Query
- **路由**: React Router v6
- **国际化**: i18next + react-i18next
- **测试**: Jest + React Testing Library + Playwright

## 实施计划

### Phase 1: 核心功能实现（第1-2周）

- [x] 1. 项目基础设施搭建
  - [x] 1.1 创建 Vite + React + TypeScript 项目
    - 使用 Ant Design Pro 脚手架初始化项目
    - 配置 TypeScript 和 ESLint 规则
    - 设置 Vite 构建配置和环境变量
    - 配置路径别名和模块解析
    - _需求 9: 响应式设计与用户体验_

  - [x] 1.2 安装和配置核心依赖
    - 安装 Ant Design 5.x 和 Pro Components
    - 配置 Zustand 状态管理
    - 集成 TanStack Query 数据管理
    - 配置 React Router v6 路由
    - _需求 9: 响应式设计与用户体验_

  - [x] 1.3 设置开发环境和工具链
    - 配置 Prettier 代码格式化
    - 设置 Husky Git hooks
    - 配置 Jest 和 React Testing Library
    - 设置 Storybook 组件文档（可选）
    - _需求 9: 响应式设计与用户体验_

- [x] 2. 认证模块实现
  - [x] 2.1 登录和注册页面
    - 实现登录表单组件（用户名、密码、租户选择）
    - 实现注册表单组件（基本信息、租户创建）
    - 添加表单验证和错误处理
    - 实现忘记密码功能（可选）
    - _需求 1: 用户认证与多租户支持_

  - [x] 2.2 JWT 认证和租户管理
    - 实现 JWT token 存储和管理
    - 实现租户切换功能
    - 添加认证状态管理（Zustand store）
    - 实现权限守卫组件
    - _需求 1: 用户认证与多租户支持_

  - [x] 2.3 API 集成和错误处理
    - 配置 Axios 请求拦截器
    - 实现认证 API 调用
    - 添加网络错误处理
    - 实现自动 token 刷新
    - _需求 1: 用户认证与多租户支持_

- [x] 3. 管理后台布局和导航
  - [x] 3.1 主布局组件实现
    - 使用 Ant Design Pro Layout 组件
    - 实现侧边栏导航菜单
    - 添加顶部导航栏（用户信息、租户切换、主题切换）
    - 实现面包屑导航
    - _需求 2: 管理后台仪表盘_

  - [x] 3.2 路由配置和权限控制
    - 配置动态路由表
    - 实现基于权限的路由守卫
    - 添加页面加载状态
    - 实现 404 和错误页面
    - _需求 1: 用户认证与多租户支持_

  - [x] 3.3 主题和国际化配置
    - 配置深色/浅色主题切换
    - 实现中英文国际化
    - 添加主题和语言持久化
    - 配置响应式断点
    - _需求 2: 管理后台仪表盘, 需求 8: 系统设置与配置_

- [x] 4. 仪表盘模块实现
  - [x] 4.1 关键指标卡片
    - 实现指标卡片组件（活跃任务数、今日标注量等）
    - 添加趋势显示和图标
    - 实现数据实时更新
    - 添加卡片点击跳转功能
    - _需求 2: 管理后台仪表盘_

  - [x] 4.2 图表组件实现
    - 集成 ECharts 或 Recharts 图表库
    - 实现标注趋势折线图
    - 实现质量分布饼图
    - 添加图表交互和数据钻取
    - _需求 2: 管理后台仪表盘, 需求 10: 数据可视化与报表_

  - [x] 4.3 快捷操作和数据集成
    - 实现快捷操作按钮组
    - 集成后端 API 获取仪表盘数据
    - 添加数据缓存和错误处理
    - 实现数据刷新和加载状态
    - _需求 2: 管理后台仪表盘_

### Phase 2: 核心业务功能（第3-4周）

- [x] 5. 标注任务管理模块
  - [x] 5.1 任务列表和筛选
    - 实现任务列表表格（ProTable 组件）
    - 添加任务状态、负责人、进度等列
    - 实现高级筛选和搜索功能
    - 添加批量操作（分配、删除等）
    - _需求 3: 标注任务管理_

  - [x] 5.2 任务创建和编辑
    - 实现任务创建表单（ProForm 组件）
    - 添加数据源选择和标注类型配置
    - 实现人员分配和截止日期设置
    - 添加表单验证和提交处理
    - _需求 3: 标注任务管理_

  - [x] 5.3 Label Studio 集成
    - 实现 iframe 嵌入 Label Studio
    - 配置 PostMessage 通信机制
    - 实现任务自动创建和同步
    - 添加标注进度实时更新
    - _需求 3: 标注任务管理_

  - [x] 5.4 进度跟踪和工时统计
    - 实现任务进度可视化组件
    - 添加工时统计和时间轴显示
    - 实现实时进度更新（WebSocket 可选）
    - 添加任务完成通知
    - _需求 3: 标注任务管理_

- [x] 6. 账单与结算模块
  - [x] 6.1 账单列表和详情
    - 实现月度账单列表表格
    - 添加账单详情页面和模态框
    - 实现账单状态管理和筛选
    - 添加账单搜索和排序功能
    - _需求 4: 账单与结算管理_

  - [x] 6.2 数据导出和报表
    - 实现 Excel 导出功能
    - 添加 PDF 报表生成（可选）
    - 实现自定义导出字段选择
    - 添加导出进度和下载管理
    - _需求 4: 账单与结算管理, 需求 10: 数据可视化与报表_

  - [x] 6.3 工时排行榜和分析
    - 实现工时排行榜组件
    - 添加奖励发放功能
    - 实现成本分析图表
    - 添加趋势分析和对比功能
    - _需求 4: 账单与结算管理_

### Phase 3: 高级功能实现（第5-6周）

- [x] 7. 数据增强管理模块
  - [x] 7.1 优质样本上传和管理
    - 实现文件上传组件（支持 CSV/JSON）
    - 添加文件格式验证和预览
    - 实现样本数据表格显示
    - 添加样本编辑和删除功能
    - _需求 5: 数据增强管理_

  - [x] 7.2 数据增强配置和执行
    - 实现增强策略配置表单
    - 添加自动填充和放大参数设置
    - 实现批量增强操作
    - 添加增强进度跟踪
    - _需求 5: 数据增强管理_

  - [x] 7.3 数据对比和统计分析
    - 实现原始数据与增强数据对比组件
    - 添加数据占比统计图表
    - 实现质量评分显示
    - 添加增强效果分析报告
    - _需求 5: 数据增强管理, 需求 10: 数据可视化与报表_

- [x] 8. 质量管理与规则配置
  - [x] 8.1 质量规则管理
    - 实现质量规则列表和编辑器
    - 添加规则模板和自定义规则
    - 实现规则启用/禁用管理
    - 添加规则测试和验证功能
    - _需求 6: 质量管理与规则配置_

  - [x] 8.2 质量报表和工单管理
    - 实现质量问题分布图表
    - 添加修复进度跟踪
    - 实现工单创建和派发界面
    - 添加考核分数统计和排名
    - _需求 6: 质量管理与规则配置_

### Phase 4: 安全与管理功能（第7-8周）

- [x] 9. 安全审计与权限管理
  - [x] 9.1 权限管理界面
    - 实现角色权限矩阵组件
    - 添加用户角色分配界面
    - 实现权限继承和覆盖逻辑
    - 添加权限变更审批流程
    - _需求 7: 安全审计与权限管理_

  - [x] 9.2 审计日志和行为分析
    - 实现操作日志列表和详情
    - 添加日志筛选和搜索功能
    - 实现用户行为分析图表
    - 添加异常行为检测和告警
    - _需求 7: 安全审计与权限管理_

  - [x] 9.3 数据脱敏和安全配置
    - 实现脱敏规则配置界面
    - 添加 IP 白名单管理
    - 实现安全策略配置
    - 添加安全合规检查报告
    - _需求 7: 安全审计与权限管理_

- [x] 10. 系统设置与管理控制台
  - [x] 10.1 租户管理（管理员功能）
    - 实现租户列表和详情管理
    - 添加租户创建和配置功能
    - 实现租户资源配额管理
    - 添加租户状态监控
    - _需求 8: 系统设置与配置_

  - [x] 10.2 AI 模型配置管理
    - 实现模型列表和配置界面
    - 添加模型切换和测试功能
    - 实现模型性能监控
    - 添加模型版本管理
    - _需求 8: 系统设置与配置_

  - [x] 10.3 系统监控和参数配置
    - 实现系统性能监控界面
    - 添加健康状态检查显示
    - 实现系统参数配置表单
    - 添加配置变更历史记录
    - _需求 8: 系统设置与配置_

### Phase 5: 测试与优化（第9-10周）

- [x] 11. 测试套件实现
  - [x] 11.1 单元测试
    - 为所有组件编写单元测试
    - 测试状态管理和数据流
    - 测试工具函数和业务逻辑
    - 实现测试覆盖率报告
    - _需求 9: 响应式设计与用户体验_

  - [x] 11.2 集成测试
    - 测试用户登录和租户切换流程
    - 测试任务创建和 Label Studio 集成
    - 测试数据增强和导出功能
    - 测试权限控制和安全验证
    - _需求 9: 响应式设计与用户体验_

  - [x] 11.3 端到端测试
    - 使用 Playwright 编写 E2E 测试
    - 测试关键用户路径和业务流程
    - 实现跨浏览器兼容性测试
    - 添加自动化测试流水线
    - _需求 9: 响应式设计与用户体验_

- [x] 12. 性能优化和部署准备
  - [x] 12.1 性能优化
    - 实现代码分割和懒加载
    - 优化图片和资源加载
    - 实现虚拟滚动和分页优化
    - 添加性能监控和分析
    - _需求 9: 响应式设计与用户体验_

  - [x] 12.2 构建和部署配置
    - 配置生产环境构建
    - 实现环境变量管理
    - 配置 CDN 和静态资源优化
    - 添加构建产物分析
    - _需求 9: 响应式设计与用户体验_

  - [x] 12.3 文档和交付
    - 编写用户使用手册
    - 创建开发者文档
    - 实现组件库文档（Storybook）
    - 准备项目交付材料
    - _需求 9: 响应式设计与用户体验_

## 项目结构

```
frontend/
├── public/                 # 静态资源
├── src/
│   ├── components/         # 通用组件
│   │   ├── Auth/          # 认证相关组件
│   │   ├── Dashboard/     # 仪表盘组件
│   │   ├── Tasks/         # 任务管理组件
│   │   ├── Billing/       # 账单管理组件
│   │   ├── Augmentation/  # 数据增强组件
│   │   ├── Security/      # 安全管理组件
│   │   └── Common/        # 通用组件
│   ├── pages/             # 页面组件
│   ├── hooks/             # 自定义 Hooks
│   ├── stores/            # Zustand 状态管理
│   ├── services/          # API 服务
│   ├── utils/             # 工具函数
│   ├── types/             # TypeScript 类型定义
│   ├── constants/         # 常量定义
│   ├── styles/            # 样式文件
│   └── locales/           # 国际化文件
├── tests/                 # 测试文件
├── docs/                  # 文档
└── package.json
```

## 开发指南

### 环境要求
- Node.js 18+
- npm 或 yarn
- 现代浏览器（Chrome 90+, Firefox 88+, Safari 14+）

### 快速开始
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 运行测试
npm run test

# 运行 E2E 测试
npm run test:e2e
```

### 开发规范
- 使用 TypeScript 进行类型检查
- 遵循 ESLint 和 Prettier 代码规范
- 组件使用函数式组件和 Hooks
- 状态管理使用 Zustand
- API 调用使用 TanStack Query
- 样式使用 Ant Design 主题系统

## 总结

SuperInsight 企业级管理前端采用现代化技术栈和分期实现策略，确保项目的可维护性和扩展性。通过 10 周的开发周期，将交付一个功能完整、性能优秀、用户体验良好的企业级数据标注管理平台。

**主要特性：**
- 🎨 现代化 UI 设计（Ant Design Pro）
- 🔐 完整的认证和权限系统
- 📊 丰富的数据可视化和报表
- 🔄 Label Studio 无缝集成
- 🌐 国际化和主题切换支持
- 📱 响应式设计和移动端适配
- ⚡ 高性能和优秀的用户体验
- 🧪 完整的测试覆盖

**技术亮点：**
- React 18 + TypeScript + Vite
- Ant Design Pro 企业级组件
- Zustand + TanStack Query 状态管理
- iframe + PostMessage Label Studio 集成
- 完整的测试套件和 CI/CD 流水线